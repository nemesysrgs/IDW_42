<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Inicio | i+Med</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="assets/css/global.css" />
  <link rel="stylesheet" href="assets/css/navbar.css" />
  <link rel="stylesheet" href="assets/css/cabecera.css" />
  <link rel="stylesheet" href="assets/css/profesionales.css" />
  <link rel="stylesheet" href="assets/css/footer.css" />
</head>

<body>
  <header>
    <nav class="navbar navbar-expand-md py-3 px-4 border-bottom">
      <div class="container-fluid d-flex flex-column flex-md-row align-items-center justify-content-between">
        <a href="index.html" class="navbar-brand mb-2 mb-md-0 d-flex justify-content-center align-items-center">
          <picture>
            <source media="(max-width: 768px)" srcset="assets/img/navbar/logo2.png" />
            <img src="assets/img/navbar/logo2.png" alt="Logo Clínica i+Med" height="55" />
          </picture>
        </a>
        <div class="d-block d-md-none mb-2 text-center">
          <a href="turnos_portal.html" class="btn btn-portal">TURNOS</a>
        </div>
        <button class="navbar-toggler mb-2 mb-md-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <img src="assets/img/icons/hamburguesa.svg" alt="Menú" height="30" />
        </button>
        <div class="collapse navbar-collapse justify-content-center text-center" id="navbarNav">
          <ul class="navbar-nav mb-2 mb-lg-0">
            <li class="nav-item">
              <a href="index.html" class="nav-link px-3">Inicio</a>
            </li>
            <li class="nav-item">
              <a href="institucional.html" class="nav-link px-3">Institucional</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Servicios
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item lav-link" href="especialidades.html">Especialidades</a></li>
                <li><a class="dropdown-item lav-link" href="profesionales.html">Profesionales</a></li>
              </ul>
            </li>

            <li class="nav-item">
              <a href="contacto.html" class="nav-link px-3">Contacto</a>
            </li>
          </ul>
        </div>
        <div class="text-end d-none d-md-block">
          <a href="turnos_portal.html" class="btn btn-portal">TURNOS</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
        <div class="container my-5">
            <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
                <div class="row g-0">
                <div class="col-md-2 text-center d-flex align-items-center justify-content-center">
                    <img 
                    id="foto_medico"
                    src="data:image/jpeg;base64," 
                    alt="Foto del médico" 
                    class="img-fluid rounded-circle p-3" 
                    style="width: 220px; height: 220px; object-fit: cover;"
                    >
                </div>

                <div class="col-md-10 p-4 text-md-start text-center">
                    <h3 class="fw-bold mb-1" id="nombre"></h3>
                    <p class="text-muted mb-2" id="especialidades"></p>
                    <p class="mb-1" id="matricula"></p>
                    <p class="mb-3" id="valor_consulta"></p>
                    <p><a class="btn btn-portal" href="turnos_portal.html">Sacar turno</a></p>
                </div>
                <div class="col-12 p-4 border-top">

                    <div class="mb-3">
                    <h6 class="fw-bold mb-2">Obras Sociales:</h6>
                    <div class="d-flex flex-wrap gap-2" id="obras_sociales">
                    </div>
                    </div>

                    <div class="descripcion mt-3" id="descripcion">
                    
                    </div>
                    
                </div>
                </div>
            </div>
            </div>
    </main>
  <footer>
    <!-- Boostrap 5 JS Bundle con Popper (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"></script>
    <script src="assets/js/comunes.js"></script>
    <script>
        function cargar_datos_medico(){
            const url_medico = window.location.href;
            const url = new URL(url_medico);
            const params = url.searchParams;
            const medicos = obtener_datos("medicos")
            
            if ( !params.get("id") || params.get("id") == "" ){
                window.location.href = "404.html"
            }
            const id = params.get("id");
            
            const _medico = medicos.data.filter(med => med.id === Number(id));
            
            if ( _medico.length === 0 ){
                window.location.href = "404.html"
            }
            
            const medico = _medico[0];
            const especialidad = obtener_datos("especialidades")
            const obras_sociales = obtener_datos("obras_sociales")

            document.getElementById("foto_medico").src = medico.imagen;
            document.getElementById("nombre").innerText = `${medico.apellido}, ${medico.nombre}`;
            document.getElementById("especialidades").innerText = medico.especialidad.map(espec_id => {
                const espec = especialidad.data.find(e => e.id === espec_id);
                return espec ? espec.nombre : "";
            }).join(", ");
            document.getElementById("matricula").innerHTML = `<strong>Matrícula:</strong> ${medico.matricula}`;
            document.getElementById("valor_consulta").innerHTML = `<strong>Valor Consulta:</strong> $${medico.valor_consulta}`;
            
            document.getElementById("obras_sociales").innerHTML = medico.obras_sociales.map(os_id => {
                const os = obras_sociales.data.find(e => e.id === os_id);
                return os ? `<span class='badge bg-fucsia'>${os.nombre}</span>` : "";
            }).join("");
            document.getElementById("descripcion").innerHTML = medico.descripcion;
            
        }
        async function inicializar_vista(){
            await cargar_datos_medico()
        }

    inicializar_vista()
    </script>
    <div class="row">
      <div class="col-12 col-sm-6 align-self-start">
        <div class="footer-contact">
          <h3>Contáctanos</h3>
          <p><i class="fa fa-whatsapp"></i> +54 9 3444 153 125</p>
          <p>
            <i class="fa fa-envelope"></i>
            <a href="mailto:contacto@clinicaimed.com">contacto@clinicaimed.com</a>
          </p>
        </div>
        <div class="footer-contact">
          <h3>Dirección</h3>
          <p>Av. Leopoldo Herrera 666, Villaguay, Entre Ríos</p>
          <p class="footer-rights">© Todos los derechos reservados</p>
        </div>
      </div>
      <div class="col-12 col-sm-6 align-self-end">
        <div class="footer-social">
          <h3>Seguínos</h3>
          <div class="social-icons">
            <a href="#"><img src="assets/img/facebook.png" alt="Facebook" />
            </a>
            <a href="#"><img src="assets/img/instagram.png" alt="Instagram" />
            </a>
            <a href="#"><img src="assets/img/x.png" alt="X" /> </a>
          </div>
        </div>
      </div>
    </div>
  </footer>
</body>

</html>